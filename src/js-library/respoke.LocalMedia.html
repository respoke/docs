<!DOCTYPE html><!-- sort the comments by name--><html lang="en" ng-app="padd"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"><title>respoke.LocalMedia - respoke.min.js Client Libary</title><meta name="keywords" content=""><meta name="keywords" content=""><link rel="shortcut icon" type="image/ico" href="https://www.respoke.io/favicon.ico"><link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700|Source+Code+Pro"><link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css"><link type="text/css" rel="stylesheet" href="https://www.respoke.io/min/production.css"><link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/docco.min.css"><link type="text/css" rel="stylesheet" href="/css/site.css"><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.13/angular.min.js"></script><script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script><script src="/js/padd.js"></script></head><body data-spy="scroll" data-target=".secondary-nav"><div id="wrap"><div class="public-site"><div ng-controller="NavController" class="topbar-wrapper opaque"><div bfind-class-foo="@isexcited" class="navigation"><div onclick="$(this).next().find('ul.nav-items').toggle()" class="nav-menu-button"><ul><li></li><li></li><li></li></ul></div><div class="nav-container"><a href="" class="www-link"><img src="https://www.respoke.io/images/logo_respoke.png" class="logo"></a><ul ng-show="menuVisibility !== false" class="nav-items"><li><a href="/#howitworks" class="www-link">How it works</a></li><li><a href="/#pricing" class="www-link">Pricing</a></li><li><a href="/">Docs</a></li><li><a href="http://community.respoke.io">Community</a></li><li><a href="/#login" class="visible-xs log-in">log in</a></li><li><a href="javascript:void(0)" onclick="logout()" class="visible-xs log-out">log out</a></li><li><a href="/#sign-up-form" class="visible-xs sign-up">Sign Up</a></li><li><a href="" class="visible-xs portal">PORTAL</a></li></ul><div ng-show="menuVisibility !== false" class="buttons"><a href="/#login" class="log-in www-link">log in</a><a href="javascript:void(0)" onclick="logout()" class="log-out">log out</a><a href="/#sign-up-form" class="sign-up www-link">Sign Up</a><a href="" class="portal">PORTAL</a></div></div></div></div><!-- Main Page Content--><region><div ng-controller="NavController" class="how-it-works"><div class="how-it-works-container"><div id="content"><div class="row"><div class="col-md-2">
<div id="main-sidebar-wrap">
  <ul id="main-sidebar" class="nav affix">
    <li>Getting Started
      <ul>
        <li ng-class="{ active: currentPage == '/' }"><a href="/">Quickstart</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/brokered-auth.html') }"><a href="/tutorials/brokered-auth.html">Authentication</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/calling-to-and-from-a-phone.html') }"><a href="/tutorials/calling-to-and-from-a-phone.html">Calling to and from a Phone</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/connecting-with-asterisk.html') }"><a href="/tutorials/connecting-with-asterisk.html">Connecting with Asterisk</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/direct-connection.html') }"><a href="/tutorials/direct-connection.html">Direct Connections</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/example-apps.html') }"><a href="/tutorials/example-apps.html">Example Apps</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/roles-and-permissions.html') }"><a href="/tutorials/roles-and-permissions.html">Roles &amp; Permissions</a></li>
        <li ng-class="{ active: currentPage === ('/tutorials/video-chat.html') }"><a href="/tutorials/video-chat.html">Video Chat</a></li>
      </ul>
    </li>
    <li>Reference
      <ul>
        <li ng-class="{ active: currentPage === ('/reference/changelog.html') }"><a href="/reference/changelog.html">Changelog</a></li>
        <li ng-class="{ active: currentPage === ('/reference/libraries.html') }"><a href="/reference/libraries.html">Libraries</a></li>
        <li ng-class="{ active: currentPage === ('/reference/respoke-js-logs.html') }"><a href="/reference/respoke-js-logs.html">Respoke.js Logs</a></li>
        <li ng-class="{ active: currentPage === ('/reference/rest-api.html') }"><a href="/reference/rest-api.html">REST API Routes</a></li>
      </ul>
    </li>
    <li>FAQs
      <ul>
        <li ng-class="{ active: currentPage === ('/faqs/general.html') }"><a href="/faqs/general.html">General</a></li>
        <li ng-class="{ active: currentPage === ('/faqs/pstn.html') }"><a href="/faqs/pstn.html">PSTN</a></li>
      </ul>
    </li>
    <li>JS Library
      <ul>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.html') }"><a href="/js-library/respoke.html">respoke</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Call.html') }"><a href="/js-library/respoke.Call.html">Call</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Client.html') }"><a href="/js-library/respoke.Client.html">Client</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Connection.html') }"><a href="/js-library/respoke.Connection.html">Connection</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.DirectConnection.html') }"><a href="/js-library/respoke.DirectConnection.html">DirectConnection</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Endpoint.html') }"><a href="/js-library/respoke.Endpoint.html">Endpoint</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.EventEmitter.html') }"><a href="/js-library/respoke.EventEmitter.html">EventEmitter</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Group.html') }"><a href="/js-library/respoke.Group.html">Group</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.LocalMedia.html') }"><a href="/js-library/respoke.LocalMedia.html">LocalMedia</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.MediaStats.html') }"><a href="/js-library/respoke.MediaStats.html">MediaStats</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.Presentable.html') }"><a href="/js-library/respoke.Presentable.html">Presentable</a></li>
        <li ng-class="{ active: currentPage === ('/js-library/respoke.RemoteMedia.html') }"><a href="/js-library/respoke.RemoteMedia.html">RemoteMedia</a></li>
      </ul>
    </li>
  </ul>
</div></div><div class="col-md-7"><div class="content-wrap"><button id="sidebar-toggle-button" onclick="$('#main-sidebar').toggle();$(this).find('i.glyphicon').toggleClass('hide');" class="btn btn xl btn-primary"><i class="glyphicon glyphicon-th-list"></i><i class="glyphicon glyphicon-remove hide"></i></button><h1 class="center">respoke.LocalMedia</h1><div class="visible-xs visible-sm"><br><br><h2 class="visible-xs">respoke.LocalMedia</h2><div data-stellar-ratio="0.02" class="secondary-nav affix"><ul class="nav"><li>Properties & Methods</li><li class="active"><a href="#respoke-LocalMedia">Overview</a></li><li><a href="#element">element</a></li><li><a href="#getAudioTracks">getAudioTracks</a></li><li><a href="#getVideoTracks">getVideoTracks</a></li><li><a href="#hasAudio">hasAudio</a></li><li><a href="#hasMedia">hasMedia</a></li><li><a href="#hasVideo">hasVideo</a></li><li><a href="#id">id</a></li><li><a href="#isAudioMuted">isAudioMuted</a></li><li><a href="#isVideoMuted">isVideoMuted</a></li><li><a href="#muteAudio">muteAudio</a></li><li><a href="#muteVideo">muteVideo</a></li><li><a href="#stop">stop</a></li><li><a href="#stream">stream</a></li><li><a href="#unmuteAudio">unmuteAudio</a></li><li><a href="#unmuteVideo">unmuteVideo</a></li><li>&nbsp;</li><li>Events<li><a href="#respoke-LocalMedia-allow">allow</a></li><li><a href="#respoke-LocalMedia-requesting-media">requesting-media</a></li></li></ul></div></div><div id="respoke-LocalMedia" class="ctx top-margin-mlady"><h1 class="left">Overview</h1><p><strong>extends&nbsp;<a href="/js-library/respoke.EventEmitter.html"><code>respoke.EventEmitter</code></a></strong></p><div><p>A wrapper around the stream from <code>getUserMedia</code>, 
which is attached to a call at <code>call.outgoingMedia</code>.</p>
</div></div><div id="element" class="ctx top-margin-mlady"><h1 class="left monospace"><code>HTMLVideoElement</code><a href="#element" class="bold"> element</a></h1><div><p>The HTML element with video attached.</p>
</div></div><div id="getAudioTracks" class="ctx top-margin-mlady"><h1 class="left monospace"><code></code><a href="#getAudioTracks" class="bold"> getAudioTracks</a></h1><div><p>Expose getAudioTracks.</p>
</div></div><div id="getVideoTracks" class="ctx top-margin-mlady"><h1 class="left monospace"><code></code><a href="#getVideoTracks" class="bold"> getVideoTracks</a></h1><div><p>Expose getVideoTracks.</p>
</div></div><div id="hasAudio" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#hasAudio"><span class="bold"> hasAudio()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Indicate whether we are sending audio.</p>
</div></div><div id="hasMedia" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#hasMedia"><span class="bold"> hasMedia()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Indicate whether we have media yet.</p>
</div></div><div id="hasVideo" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#hasVideo"><span class="bold"> hasVideo()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Indicate whether we are sending video.</p>
</div></div><div id="id" class="ctx top-margin-mlady"><h1 class="left monospace"><code>string</code><a href="#id" class="bold"> id</a></h1><div><p>Respoke media ID (different from a <code>MediaStreamTrack.id</code>).</p>
</div></div><div id="isAudioMuted" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#isAudioMuted"><span class="bold"> isAudioMuted()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Whether the audio stream is muted.</p>
<p>All audio tracks must be muted for this to return <code>false</code>.</p>
</div></div><div id="isVideoMuted" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#isVideoMuted"><span class="bold"> isVideoMuted()</span></a></h1><p><strong>returns <code>boolean</code></strong></p><div><p>Whether the video stream is muted.</p>
<p>All video tracks must be muted for this to return <code>false</code>.</p>
</div></div><div id="muteAudio" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#muteAudio"><span class="bold"> muteAudio()</span></a></h1><p><strong>fires </strong><code>mute</code></p><div><p>Mute local audio stream.</p>
</div></div><div id="muteVideo" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#muteVideo"><span class="bold"> muteVideo()</span></a></h1><p><strong>fires </strong><code>mute</code></p><div><p>Mute local video stream.</p>
</div></div><div id="stop" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#stop"><span class="bold"> stop()</span></a></h1><p><strong>fires </strong><code>stop</code></p><div><p>Stop the stream.</p>
</div></div><div id="stream" class="ctx top-margin-mlady"><h1 class="left monospace"><code>RTCMediaStream</code><a href="#stream" class="bold"> stream</a></h1><div><p>The local <code>MediaStream</code> from <code>getUserMedia()</code>.</p>
</div></div><div id="unmuteAudio" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#unmuteAudio"><span class="bold"> unmuteAudio()</span></a></h1><p><strong>fires </strong><code>mute</code></p><div><p>Unmute local audio stream.</p>
</div></div><div id="unmuteVideo" class="ctx top-margin-mlady"><h1 class="left monospace"><a href="#unmuteVideo"><span class="bold"> unmuteVideo()</span></a></h1><p><strong>fires </strong><code>mute</code></p><div><p>Unmute local video stream.</p>
</div></div><h1 class="top-margin-mlady">Events</h1><p>Listen for events on an instance of this class.</p><div id="respoke-LocalMedia-allow" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.LocalMedia-allow" class="bold">allow</a></h1><div><p>The user has approved the request for media. Any UI changes made to remind the user to click Allow
should be canceled now. This event is the same as the <code>onAllow</code> callback.  This event gets fired
even if the allow process is automatic, i. e., permission and media is granted by the browser
without asking the user to approve it.</p>
</div><pre><code>localmedia.listen('allow', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.LocalMedia</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><div id="respoke-LocalMedia-requesting-media" class="ctx top-margin-mlady"><h1 class="left monospace"><code>event</code> <a href="#respoke.LocalMedia-requesting-media" class="bold">requesting-media</a></h1><div><p>The browser is asking for permission to access the User&#39;s media. This would be an ideal time
to modify the UI of the application so that the user notices the request for permissions
and approves it.</p>
</div><pre><code>localmedia.listen('requesting-media', function (evt) {
    // handle event
});</code></pre><h3>Callback Arguments</h3><div class="row hidden-xs param"><div class="col-sm-4">Name</div><div class="col-sm-3">Type</div><div class="col-sm-5"></div></div><div class="row param"><div class="col-sm-4"><code>evt.name</code></div><div class="col-sm-3"><strong>string</strong></div><div class="col-sm-5">the event name.</div></div><br class="visible-xs"><div class="row param"><div class="col-sm-4"><code>evt.target</code></div><div class="col-sm-3"><strong>respoke.LocalMedia</strong></div><div class="col-sm-5"></div></div><br class="visible-xs"></div><br><br><br><br></div></div><div class="col-md-3"><div class="hidden-xs hidden-sm"><h2 class="visible-xs">respoke.LocalMedia</h2><div data-stellar-ratio="0.02" class="secondary-nav affix"><ul class="nav"><li>Properties & Methods</li><li class="active"><a href="#respoke-LocalMedia">Overview</a></li><li><a href="#element">element</a></li><li><a href="#getAudioTracks">getAudioTracks</a></li><li><a href="#getVideoTracks">getVideoTracks</a></li><li><a href="#hasAudio">hasAudio</a></li><li><a href="#hasMedia">hasMedia</a></li><li><a href="#hasVideo">hasVideo</a></li><li><a href="#id">id</a></li><li><a href="#isAudioMuted">isAudioMuted</a></li><li><a href="#isVideoMuted">isVideoMuted</a></li><li><a href="#muteAudio">muteAudio</a></li><li><a href="#muteVideo">muteVideo</a></li><li><a href="#stop">stop</a></li><li><a href="#stream">stream</a></li><li><a href="#unmuteAudio">unmuteAudio</a></li><li><a href="#unmuteVideo">unmuteVideo</a></li><li>&nbsp;</li><li>Events<li><a href="#respoke-LocalMedia-allow">allow</a></li><li><a href="#respoke-LocalMedia-requesting-media">requesting-media</a></li></li></ul></div></div></div></div></div></div></div></region></div><!-- Footer--><region><footer><div class="content-wrap"><section class="copy"><div class="footer"><div class="footer-container"><div class="footer-links"><a href="http://digium.com/respoke"><img src="/images/digium_white.png" class="digium-logo"></a></div><div class="footer-content"><p class="copy">Copyright &copy; 2014 D.C.S, LLC</p><p class="copy"><a href="mailto:info@respoke.io">info@respoke.io</a></p></div><div class="footer-links social-links"><a href="https://twitter.com/respoke"><span class="fa fa-twitter"></span></a><a href="https://www.facebook.com/respokeIO"><span class="fa fa-facebook"></span></a><a href="https://plus.google.com/110089434291590810767" rel="publisher"><span class="fa fa-google-plus"></span></a></div></div></div></section></div></footer></region></div></body></html><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/stellar.js/0.6.2/jquery.stellar.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script><script>// Scrollspy
// TODO: use angular-ui boostrap version instead
$('body').scrollspy({ target: '.secondary-nav', offset: 150 });

// parallax by http://markdalgleish.com/projects/stellar.js/
$.stellar();

// affixing the sidebar at high resolutions
var resizeEvent = function(event){
  if($(window).width() > 990) {
      affixLeftSidebar();
  }
};
window.addEventListener('resize', resizeEvent);
resizeEvent();

// Showing and login and signup
(function () {
    var token = $.cookie('token');
    var $login = $('.log-in');
    var $logout = $('.log-out');
    var $signup = $('.sign-up');
    var $portal = $('.portal');
    var $wwwlink = $('.www-link');
    var $logo = $('img.logo');
    
    function loggedIn() {
        $login.remove();
        $signup.remove();
        
        $portal.css('display', 'inline-block');
        $logout.css('display', 'inline-block');
    }
    function notLoggedIn() {
        $portal.remove();
        $logout.remove();
        
        //- $login.css('display', 'inline-block');
        //- $signup.css('display', 'inline-block');
    }
    
    var apiBase = window.location.host.replace('docs', 'api').replace(':2003', ':2000');
    var apiUrl = apiBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    apiUrl += apiBase + '/v1/admins/me';
    var publicBase = window.location.host.replace('docs', 'www').replace(':2003', ':2001');
    var publicUrl = publicBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    publicUrl += publicBase;
    var portalBase = window.location.host.replace('docs', 'portal').replace(':2003', ':2002');
    var portalUrl = portalBase.indexOf('testing.digiumlabs.com') !== -1 ? 'http://' : 'https://';
    portalUrl += portalBase;
    
    if (token) {
        $.ajax({
            url: apiUrl,
            type: 'GET',
            headers: {
                'Admin-Token': token
            },
            success: loggedIn,
            error: notLoggedIn
        });
    }
    else {
        notLoggedIn();
    }
    
    $portal.attr('href', portalUrl + $portal.attr('href'));
    $wwwlink.each(function () {
        $(this).attr('href', publicUrl + $(this).attr('href'))
    });
    $logo.attr('src', publicUrl + $logo.attr('src').replace('https://www.respoke.io',''));
})();

function logout() {
    $.removeCookie('token', { domain: '.' + window.location.hostname.split('.').slice(-2).join('.') });
    window.location.reload();
}

$.ajax({
      url: '//d3px1qgagsf6ei.cloudfront.net/Scripts/f772acdb-7c45-430c-8c5a-28c3bcbb420e',
      crossDomain: true,
      dataType: 'script',
      success: function () {
          Payboard.Events.trackPage;
      },
      error: function () {
          console.log("There was an error retrieving the payboard tracking script");
      }
});
</script>